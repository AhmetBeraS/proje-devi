<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Kitaplar</title>
  <link rel="stylesheet" href="style.css"/>
  <style>
    #sepet {
      position: fixed;
      top: 60px;      
      right: 20px;    
      width: 300px;
      background: white;
      border: 1px solid #ccc;
      padding: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
      z-index: 1000;
      display: none;   
    }

    #sepet.acik {
      display: block;
    }

    #sepetToggleBtn {
      position: fixed;
      top: 20px;      
      right: 20px;   
      font-size: 24px;
      background-color: #008CBA;
      color: white;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      z-index: 1001;
    }

    /* √ñd√ºn√ß alƒ±nan kitaplarƒ±n arka planƒ± */
    #kitapListesi li.oduncAlindi {
      background-color: #ffdddd;
    }

    /* Kitap listesi satƒ±r stili */
    #kitapListesi li {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    /* Kitap kapaƒüƒ± k√º√ß√ºlt√ºld√º */
    .kitap-kapak {
      width: 40px;
      height: 60px;
      object-fit: cover;
      border: 1px solid #ccc;
    }

    /* Butonlar i√ßin ufak stil */
    button {
      cursor: pointer;
      border: none;
      border-radius: 5px;
      padding: 5px 10px;
      background-color: #008CBA;
      color: white;
      transition: background-color 0.3s;
    }

    button:hover:not(:disabled) {
      background-color: #005f73;
    }

    button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }

    /* Form alanlarƒ± */
    #kitapEkleForm {
      margin: 20px 0;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
    }

    #kitapEkleForm input, #kitapEkleForm select {
      padding: 5px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

  </style>
</head>
<body>
  <header>
    <h1>K√ºt√ºphane Sitesi</h1>
    <nav>
      <ul>
        <li><a href="index.html">Ana Sayfa</a></li>
        <li><a href="kitaplar.html">Kitaplar</a></li>
        <li><a href="iletisim.html">ƒ∞leti≈üim</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <h2>Kitaplar</h2>

    <!-- Kitap Ekleme Formu -->
    <form id="kitapEkleForm" aria-label="Yeni Kitap Ekleme Formu">
      <input type="text" id="kitapAdi" placeholder="Kitap Adƒ±" required />
      <input type="text" id="yazarAdi" placeholder="Yazar Adƒ±" required />
      <select id="kategori" required>
        <option value="" disabled selected>Kategori Se√ßin</option>
        <option value="Roman">Roman</option>
        <option value="Distopya">Distopya</option>
        <option value="Felsefi Roman">Felsefi Roman</option>
        <option value="Klasik">Klasik</option>
        <option value="Klasik Roman">Klasik Roman</option>
        <option value="Tarih">Tarih</option>
      </select>
      <input type="text" id="kapakURL" placeholder="Kapak G√∂rsel URL'si" required />
      <button type="submit">Kitap Ekle</button>
    </form>

    <!-- Filtre Butonlarƒ± -->
    <div id="filtreler">
      <button onclick="araVeFiltrele('Hepsi')">Hepsi</button>
      <button onclick="araVeFiltrele('Roman')">Roman</button>
      <button onclick="araVeFiltrele('Distopya')">Distopya</button>
      <button onclick="araVeFiltrele('Felsefi Roman')">Felsefi Roman</button>
      <button onclick="araVeFiltrele('Klasik')">Klasik</button>
      <button onclick="araVeFiltrele('Klasik Roman')">Klasik Roman</button>
      <button onclick="araVeFiltrele('Tarih')">Tarih</button>
    </div>

    <!-- Arama Kutusu -->
    <input
      type="text"
      id="aramaKutusu"
      placeholder="Kitap ara..."
      onkeyup="araVeFiltrele()"
      style="margin:10px 0 20px 0; width: 100%; padding: 10px; font-size: 16px; border-radius: 12px; border: 1px solid #ccc;"
    />

    <!-- Kitap Listesi -->
    <ul id="kitapListesi" aria-live="polite" aria-label="Kitap Listesi">
      <li data-kategori="Roman">
        <img src="images/suc-ve-ceza.jpg" alt="Su√ß ve Ceza" class="kitap-kapak" />
        <span>Su√ß ve Ceza - Fyodor Dostoyevski</span>
        <button class="sepeteEkleBtn">Sepete Ekle</button>
        <button class="oduncAlBtn">√ñd√ºn√ß Al</button>
      </li>
      <li data-kategori="Distopya">
        <img src="images/1984.jpg" alt="1984" class="kitap-kapak" />
        <span>1984 - George Orwell</span>
        <button class="sepeteEkleBtn">Sepete Ekle</button>
        <button class="oduncAlBtn">√ñd√ºn√ß Al</button>
      </li>
      <li data-kategori="Klasik Roman">
        <img src="images/sefiller.jpg" alt="Sefiller" class="kitap-kapak" />
        <span>Sefiller - Victor Hugo</span>
        <button class="sepeteEkleBtn">Sepete Ekle</button>
        <button class="oduncAlBtn">√ñd√ºn√ß Al</button>
      </li>
      <li data-kategori="Felsefi Roman">
        <img src="images/simyacƒ±.jpg" alt="Simyacƒ±" class="kitap-kapak" />
        <span>Simyacƒ± - Paulo Coelho</span>
        <button class="sepeteEkleBtn">Sepete Ekle</button>
        <button class="oduncAlBtn">√ñd√ºn√ß Al</button>
      </li>
      <li data-kategori="Roman">
        <img src="images/k√ºrk mantolu madonna.jpg" alt="K√ºrk Mantolu Madonna" class="kitap-kapak" />
        <span>K√ºrk Mantolu Madonna - Sabahattin Ali</span>
        <button class="sepeteEkleBtn">Sepete Ekle</button>
        <button class="oduncAlBtn">√ñd√ºn√ß Al</button>
      </li>
      <li data-kategori="Tarih">
        <img src="images/MIT.jpg" alt="Milli ƒ∞stihbarat Te≈ükilatƒ±" class="kitap-kapak" />
        <span>Milli ƒ∞stihbarat Te≈ükilatƒ±</span>
        <button class="sepeteEkleBtn">Sepete Ekle</button>
        <button class="oduncAlBtn">√ñd√ºn√ß Al</button>
      </li>
      <li data-kategori="Tarih">
        <img src="images/Nutuk.jpg" alt="Nutuk" class="kitap-kapak" />
        <span>Nutuk - Mustafa Kemal Atat√ºrk</span>
        <button class="sepeteEkleBtn">Sepete Ekle</button>
        <button class="oduncAlBtn">√ñd√ºn√ß Al</button>
      </li>
      <li data-kategori="Klasik Roman">
        <img src="images/romeovejuliet.jpg" alt="Romeo ve Juliet" class="kitap-kapak" />
        <span>Romeo ve Juliet - William Shakespeare</span>
        <button class="sepeteEkleBtn">Sepete Ekle</button>
        <button class="oduncAlBtn">√ñd√ºn√ß Al</button>
      </li>
      <li data-kategori="Klasik">
        <img src="images/komedya.jpg" alt="ƒ∞lahi Komedya" class="kitap-kapak" />
        <span>ƒ∞lahi Komedya - Dante Alighieri</span>
        <button class="sepeteEkleBtn">Sepete Ekle</button>
        <button class="oduncAlBtn">√ñd√ºn√ß Al</button>
      </li>
      <li data-kategori="Roman">
        <img src="images/vadidekizambak.jpg" alt="Vadideki Zambak" class="kitap-kapak" />
        <span>Vadideki Zambak - Honore de Balzac</span>
        <button class="sepeteEkleBtn">Sepete Ekle</button>
        <button class="oduncAlBtn">√ñd√ºn√ß Al</button>
      </li>
      <li data-kategori="Klasik Roman">
        <img src="images/annekaranƒ±na.jpg" alt="Anna Karenina" class="kitap-kapak" />
        <span>Anna Karenina - Lev Tolstoy</span>
        <button class="sepeteEkleBtn">Sepete Ekle</button>
        <button class="oduncAlBtn">√ñd√ºn√ß Al</button>
      </li>
      <li data-kategori="Klasik Roman">
        <img src="images/askvegurur.jpg" alt="A≈ük ve Gurur" class="kitap-kapak" />
        <span>A≈ük ve Gurur - Jane Austen</span>
        <button class="sepeteEkleBtn">Sepete Ekle</button>
        <button class="oduncAlBtn">√ñd√ºn√ß Al</button>
      </li>
    </ul>

    <!-- √ñd√ºn√ßteki Kitaplar B√∂l√ºm√º -->
    <section id="odunctekiKitaplar" aria-label="√ñd√ºn√ßteki Kitaplar" style="margin-top: 40px;">
      <h2>√ñd√ºn√ßteki Kitaplar</h2>
      <ul id="oduncListesi"></ul>
    </section>
  </main>

  <!-- Sepet Butonu -->
  <button id="sepetToggleBtn" title="Sepeti G√∂ster / Gizle">üõí</button>

  <!-- Sepet -->
  <section id="sepet" aria-label="Sepetiniz">
    <h3>Sepetiniz</h3>
    <ul id="sepetListesi"></ul>
    <button id="sepetiTemizle">Sepeti Temizle</button>
  </section>

  <footer>
    <p>¬© 2025 K√ºt√ºphane Sitesi</p>
  </footer>

  <script>
    // Sepet g√∂r√ºn√ºrl√ºƒü√ºn√º kontrol et
    const sepetBtn = document.getElementById('sepetToggleBtn');
    const sepet = document.getElementById('sepet');
    const sepetListesi = document.getElementById('sepetListesi');
    const temizleBtn = document.getElementById('sepetiTemizle');

    sepetBtn.addEventListener('click', () => {
      sepet.classList.toggle('acik');
    });

    // Kitap listesi ve √∂d√ºn√ß listesi DOM elemanlarƒ±
    const kitapListesi = document.getElementById('kitapListesi');
    const oduncListesi = document.getElementById('oduncListesi');

    // Sepete ekleme i≈ülevi
    function sepeteEkle(kitapIsmi) {
      // Zaten sepette var mƒ± kontrol et
      const varMi = [...sepetListesi.children].some(li => li.textContent.includes(kitapIsmi));
      if (varMi) {
        alert('Bu kitap zaten sepette.');
        return;
      }
      const li = document.createElement('li');
      li.textContent = kitapIsmi;

      const kaldirBtn = document.createElement('button');
      kaldirBtn.textContent = '‚úï';
      kaldirBtn.title = 'Sepetten Kaldƒ±r';
      kaldirBtn.addEventListener('click', () => {
        sepetListesi.removeChild(li);
      });
      li.appendChild(kaldirBtn);

      sepetListesi.appendChild(li);
      sepet.classList.add('acik'); // Sepeti a√ß
    }

    // Sepete ekle butonlarƒ± i√ßin dinleyici atama
    function sepeteEkleBtnlariGuncelle() {
      document.querySelectorAll('.sepeteEkleBtn').forEach(btn => {
        btn.onclick = e => {
          const kitapLi = e.target.closest('li');
          const kitapIsmi = kitapLi.querySelector('span').textContent;
          sepeteEkle(kitapIsmi);
        };
      });
    }
    sepeteEkleBtnlariGuncelle();

    // Sepeti temizle butonu
    temizleBtn.addEventListener('click', () => {
      if (confirm('Sepeti tamamen bo≈üaltmak istediƒüinizden emin misiniz?')) {
        sepetListesi.innerHTML = '';
      }
    });

    // Arama ve filtreleme fonksiyonu
    function araVeFiltrele(kategori) {
      const aramaDegeri = document.getElementById('aramaKutusu').value.toLowerCase();
      const kitaplar = kitapListesi.querySelectorAll('li');

      kitaplar.forEach(li => {
        const kitapAdi = li.querySelector('span').textContent.toLowerCase();
        const kitapKategori = li.getAttribute('data-kategori');

        const kategoriUygun = kategori === 'Hepsi' || !kategori || kategori === '' || kitapKategori === kategori;
        const aramaUygun = kitapAdi.includes(aramaDegeri);

        if (kategoriUygun && aramaUygun) {
          li.style.display = 'flex';
        } else {
          li.style.display = 'none';
        }
      });
    }

    // √ñd√ºn√ß alma ve iade sistemi
    function oduncAl(kitapLi) {
      const kitapIsmi = kitapLi.querySelector('span').textContent;

      // Zaten √∂d√ºn√ßte mi kontrol et
      const varMiOdunc = [...oduncListesi.children].some(li => li.textContent.includes(kitapIsmi));
      if (varMiOdunc) {
        alert('Bu kitap zaten √∂d√ºn√ßte.');
        return;
      }

      // √ñd√ºn√ßteki listeye ekle
      const li = document.createElement('li');
      li.textContent = kitapIsmi;

      const iadeBtn = document.createElement('button');
      iadeBtn.textContent = 'ƒ∞ade Et';
      iadeBtn.title = 'Kitabƒ± ƒ∞ade Et';
      iadeBtn.addEventListener('click', () => {
        oduncListesi.removeChild(li);
        // Kitabƒ± normal duruma d√∂nd√ºr
        kitapLi.classList.remove('oduncAlindi');
        kitapLi.querySelector('.oduncAlBtn').disabled = false;
      });

      li.appendChild(iadeBtn);
      oduncListesi.appendChild(li);

      // Kitap listesindeki √∂d√ºn√ß alma butonunu pasifle≈ütir
      kitapLi.classList.add('oduncAlindi');
      kitapLi.querySelector('.oduncAlBtn').disabled = true;
    }

    // √ñd√ºn√ß alma butonlarƒ±na dinleyici ekle
    function oduncAlBtnlariGuncelle() {
      document.querySelectorAll('.oduncAlBtn').forEach(btn => {
        btn.onclick = e => {
          const kitapLi = e.target.closest('li');
          oduncAl(kitapLi);
        };
      });
    }
    oduncAlBtnlariGuncelle();

    // Kitap ekleme formu i≈ülevi
    const kitapEkleForm = document.getElementById('kitapEkleForm');

    kitapEkleForm.addEventListener('submit', e => {
      e.preventDefault();

      // Deƒüerleri al
      const kitapAdi = document.getElementById('kitapAdi').value.trim();
      const yazarAdi = document.getElementById('yazarAdi').value.trim();
      const kategori = document.getElementById('kategori').value;
      const kapakURL = document.getElementById('kapakURL').value.trim();

      if (!kitapAdi || !yazarAdi || !kategori || !kapakURL) {
        alert('L√ºtfen t√ºm alanlarƒ± doldurun.');
        return;
      }

      // Yeni li olu≈ütur
      const li = document.createElement('li');
      li.setAttribute('data-kategori', kategori);

      const img = document.createElement('img');
      img.src = kapakURL;
      img.alt = kitapAdi;
      img.className = 'kitap-kapak';

      const span = document.createElement('span');
      span.textContent = `${kitapAdi} - ${yazarAdi}`;

      const sepeteBtn = document.createElement('button');
      sepeteBtn.textContent = 'Sepete Ekle';
      sepeteBtn.className = 'sepeteEkleBtn';
      sepeteBtn.title = 'Sepete Ekle';

      const oduncBtn = document.createElement('button');
      oduncBtn.textContent = '√ñd√ºn√ß Al';
      oduncBtn.className = 'oduncAlBtn';
      oduncBtn.title = '√ñd√ºn√ß Al';

      li.appendChild(img);
      li.appendChild(span);
      li.appendChild(sepeteBtn);
      li.appendChild(oduncBtn);

      kitapListesi.appendChild(li);

      // Butonlara eventleri tekrar ata
      sepeteEkleBtnlariGuncelle();
      oduncAlBtnlariGuncelle();

      // Formu temizle
      kitapEkleForm.reset();
    });

  </script>
</body>
</html>
